(this["webpackJsonpreact-component"]=this["webpackJsonpreact-component"]||[]).push([[0],{108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(8),c=n.n(o),s=(n(76),n(77),n(15)),u=n(16),i=n(18),l=n(17),d=n(30),p=n(13),m=n(27),f=n(6),h=n.n(f),v=n(12),g=(n(84),n(85)),b=function(){var e=Object(v.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||void 0===n){e.next=6;break}return e.next=3,g.login(t,n);case 3:return e.abrupt("return",e.sent);case 6:throw new Error("Identfiants manquants");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAllGarage();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=6;break}return e.next=3,g.deleteGarage(t);case 3:return e.abrupt("return",e.sent);case 6:throw new Error("Identifiant du garage incorrect");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),void 0===t){e.next=7;break}return e.next=4,g.postGarage(t.name,t.address,t.phoneNumber,t.image);case 4:return e.abrupt("return",e.sent);case 7:throw new Error("Erreur composant le garage manquant");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(v.a)(h.a.mark((function e(t,n,r,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||void 0===n||void 0===r||void 0===a){e.next=4;break}return e.next=3,g.updateGarage(t,n,r,a);case 3:return e.abrupt("return",e.sent);case 4:throw new Error("Les informations \xe0 envoyer \xe0 l'pi ne sont pas bonnes");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getAllMecanicien();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=6;break}return e.next=3,g.deleteGarage(t);case 3:return e.abrupt("return",e.sent);case 6:throw new Error("Identifiant du m\xe9canicien incorrect");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(v.a)(h.a.mark((function e(t,n,r,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||void 0===n||void 0===r||void 0===a){e.next=4;break}return e.next=3,g.updateMecanicien(t,n,r,a);case 3:return e.abrupt("return",e.sent);case 4:throw new Error("Les informations \xe0 envoyer \xe0 l'pi ne sont pas bonnes");case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=6;break}return e.next=3,g.postMecanicien(t.nom,t.prenom,t.password,t.adresseMail,t.garage_fk);case 3:return e.abrupt("return",e.sent);case 6:throw new Error("Erreur composant le garage manquant");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=n(139),M=n(143),A=n(144),G=n(145),T=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={email:"",password:"",loaded:!1,loading:!1,errorMassage:!1,connected:!1},r}return Object(u.a)(n,[{key:"dissmisError",value:function(){this.setState({error:""})}},{key:"handleSubmit",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({error:!1,errorMessage:"",loading:!0,loaded:!1}),e.prev=1,e.next=4,b(this.state.email,this.state.password);case 4:if("mecano"===(t=e.sent).user.userRecup.userType){e.next=7;break}throw new Error("Un client ne peut pas se connecter \xe0 l'application!");case 7:this.props.login(t.user.userRecup),this.setState({connected:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({error:!0,loading:!1,loaded:!0,errorMessage:e.t0});case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"userChange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e,t=this;return this.state.connected?a.a.createElement(p.a,{to:"/menu"}):(this.state.loaded?this.state.loading?e=a.a.createElement(S.a,{item:!0},a.a.createElement(M.a,{component:"h6",color:"error"},"Chargement en cours")," "):this.state.error&&(e=a.a.createElement(S.a,{item:!0},a.a.createElement(M.a,{component:"h6",color:"error"},this.state.errorMassage)," ")):e=null,a.a.createElement("div",{className:"gridConnection"},a.a.createElement(S.a,{container:!0,justify:"center",direction:"row"},a.a.createElement(S.a,{item:!0},a.a.createElement(S.a,{container:!0,direction:"column",justify:"center",className:"login-form"},a.a.createElement(S.a,{item:!0},a.a.createElement(M.a,{component:"h1"},"Se connecter")),a.a.createElement(S.a,{item:!0},a.a.createElement(S.a,{container:!0,direction:"column",spacing:3},a.a.createElement(S.a,{item:!0},a.a.createElement(A.a,{type:"text",label:"Adresse mail",value:this.state.email,onChange:function(e){return t.userChange(e)},required:!0,autoFocus:!0})),a.a.createElement(S.a,{item:!0},a.a.createElement(A.a,{type:"password",label:"Mot de passe",value:this.state.password,onChange:function(e){return t.passwordChange(e)},onKeyPress:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||(t.dissmisError(),t.handleSubmit().then())},required:!0})),a.a.createElement(S.a,{item:!0},a.a.createElement(G.a,{variant:"contained",type:"submit",className:"button-block",onClick:function(){t.dissmisError(),t.handleSubmit()}},"Connexion")),e&&e)))))))}}]),n}(a.a.Component),N=Object(m.b)(void 0,(function(e){return{login:function(t){e({type:"login",payload:{userInfo:t}})}}}))(T),H=(n(108),n(109),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={user:r.props.user},r}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){}},{key:"render",value:function(){return a.a.createElement("div",{className:"menu"},a.a.createElement(G.a,{variant:"contained",component:d.b,to:"/garages"},"Modifier les garages"),a.a.createElement(G.a,{variant:"contained",component:d.b,to:"/mechanics"},"Modifier les m\xe9caniciens"),a.a.createElement(G.a,{variant:"contained",component:d.b,to:"/schedules"},"Modifier les horaires"),a.a.createElement(G.a,{variant:"contained",component:d.b,to:"/repairs"},"Modifier les reparations"))}}]),n}(a.a.Component)),q=Object(m.b)((function(e){return console.log("Matthys"),{user:e.userStore}}),(function(e){return{login:function(t){e({type:"login",payload:{userInfo:t}})}}}))(H),D=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).renderTableHeader=r.props.renderTableHeader,r.state={name:"",address:"",phoneNumber:"",image:"",element:e.element},r}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){this.props!==e&&this.setState({element:this.props.element})}},{key:"nameChange",value:function(e){this.setState({name:e.target.value})}},{key:"addressChange",value:function(e){this.setState({address:e.target.value})}},{key:"phoneNumberChange",value:function(e){this.setState({phoneNumber:e.target.value})}},{key:"imageChange",value:function(e){this.setState({image:e.target.value})}},{key:"submit",value:function(e,t,n,r){y({name:e,address:t,phoneNumber:n,image:r})}},{key:"render",value:function(){var e=this;return console.log(this.state.element),a.a.createElement("div",{className:"AddGarage"},a.a.createElement("h1",{key:"title"},"Ajouter un garage"),this.renderTableHeader(this.state.element).map((function(t,n){var r,o;switch(console.log(t),t){case"nom":r=e.nameChange;break;case"numtel":r=e.phoneNumberChange;break;case"adresse":r=e.addressChange}return"image"!==t?a.a.createElement("input",{key:n,type:"text",name:null!==(o=e.state.element["".concat(t)])&&void 0!==o?o:"",placeholder:e.state.element["".concat(t)],onChange:function(e){return r(e)},required:!0}):a.a.createElement("input",{key:n,type:"text",name:e.state.element["".concat(t)],placeholder:e.state.element["".concat(t)],onChange:function(t){return e.imageChange(t)},required:!0})})),a.a.createElement("button",{type:"submit",onClick:function(){return e.submit(e.state.name,e.state.address,e.state.phoneNumber,e.state.image)}},"Add"))}}]),n}(a.a.Component),I=function(e){var t=e.element,n=e.handleEditClick,r=e.index,o=e.renderTableHeader;return a.a.createElement("tr",null,o(t).map((function(e,n){return"image"!==e?a.a.createElement("td",{key:n},t["".concat(e)]):a.a.createElement("td",{key:n},a.a.createElement("img",{height:"60px",width:"60px",src:t["".concat(e)]}))})),a.a.createElement("td",null,a.a.createElement("button",{type:"button",onClick:function(e){return n(e,r)}},"edit"),a.a.createElement("button",{type:"button",onClick:function(){return n(t.id)}},"delete")))},U=(n(60),function(e){var t=e.handleEditClick,n=e.element,r=e.renderTableHeader;return a.a.createElement("tr",null,r(n).map((function(e,t){return a.a.createElement("td",null,a.a.createElement("input",{type:"text",name:n["".concat(e)],placeholder:n["".concat(e)],value:n["".concat(e)],required:!0},n["".concat(e)]))})),a.a.createElement("td",null,a.a.createElement("button",{type:"button"},"save"),a.a.createElement("button",{type:"button",onClick:function(e){return t(e,null)}},"cancel")))}),R=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).handleEditClick=function(e,t){e.preventDefault(),r.setState({idEdit:t})},r.getAllElements=r.props.getAllElements,r.deleteElement=r.props.deleteElement,r.updateGarage=r.props.updateGarage,r.postGarage=r.props.postGarage,r.state={elements:[],idEdit:null,idDelete:null},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getAllElements().then((function(t){return e.setState({elements:t})})).catch((function(e){return console.error(e)}))}},{key:"renderTableHeader",value:function(e){var t=[];for(var n in e)"id"!==n&&t.push(n);return t}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,this.renderTableHeader(this.state.elements[0]).map((function(e,t){return a.a.createElement("th",{key:t},e)})),a.a.createElement("th",{key:"titleTh"},"Action"))),a.a.createElement("tbody",null,this.state.elements.map((function(t,n){return a.a.createElement(r.Fragment,{key:n},e.state.idEdit===n?a.a.createElement(U,{handleEditClick:e.handleEditClick,element:t,renderTableHeader:e.renderTableHeader}):a.a.createElement(I,{element:t,handleDeleteClick:e.deleteElement,index:n,renderTableHeader:e.renderTableHeader}))})))),a.a.createElement(D,{renderTableHeader:this.renderTableHeader,element:this.state.elements[0]})))}}]),n}(a.a.Component),X=(n(110),function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={value:null},r.handleSelection=r.props.handleSelection,r}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.handleSelection(e,this.state.value)}},{key:"render",value:function(){return a.a.createElement("form",{onSubmit:this.handleSubmit,className:"SelectMechanics"},a.a.createElement("label",null,"Choisissez un m\xe9canicien :",a.a.createElement("select",{value:this.state.value,onChange:this.handleChange},a.a.createElement("option",{value:"X"},"X"),a.a.createElement("option",{value:"X"},"X"))),a.a.createElement("input",{type:"submit",value:"Envoyer"}))}}]),n}(a.a.Component)),B=(a.a.Component,function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={user:void 0},r}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){void 0===this.state.user&&this.setState({user:this.props.userStore})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(d.a,null,a.a.createElement(p.d,null,a.a.createElement(p.b,{path:"/login",component:N}),a.a.createElement(p.b,{path:"/menu",render:function(){return void 0===e.state.user?a.a.createElement(p.a,{to:"/login"}):"mecano"===e.state.user.userType?a.a.createElement(q,null):a.a.createElement(p.a,{to:"/"})}}),a.a.createElement(p.b,{path:"/garages",render:function(){return void 0===e.state.user?a.a.createElement(p.a,{to:"/login"}):"mecano"===e.state.user.userType?a.a.createElement(R,{getAllElements:E,deleteElement:w,updateGarage:k,postGarage:y}):a.a.createElement(p.a,{to:"/login"})}}),a.a.createElement(p.b,{path:"/mechanics",render:function(){return void 0===e.state.user?a.a.createElement(p.a,{to:"/login"}):"mecano"===e.state.user.userType?a.a.createElement(R,{getAllElements:x,deleteElement:j,updateGarage:O,postGarage:C}):a.a.createElement(p.a,{to:"/login"})}}))))}}]),n}(a.a.Component)),J=Object(m.b)((function(e){return console.log(e.login.userStore),{userStore:e.login.userStore}}))(B);var L=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(48),F=Object(z.b)(Object(z.a)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return{userStore:t.payload.userInfo};default:return e}}}));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(m.a,{store:F},a.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){},71:function(e,t,n){e.exports=n(111)},76:function(e,t,n){},77:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return l})),n.d(t,"getAllGarage",(function(){return d})),n.d(t,"deleteGarage",(function(){return p})),n.d(t,"postGarage",(function(){return m})),n.d(t,"updateGarage",(function(){return f})),n.d(t,"getAllMecanicien",(function(){return h})),n.d(t,"deleteMecanicien",(function(){return v})),n.d(t,"updateMecanicien",(function(){return g})),n.d(t,"postMecanicien",(function(){return b}));var r=n(6),a=n.n(r),o=n(12),c=n(24),s=n.n(c),u="http://localhost:3001/",i={"Access-Control-Allow-Origin":"*"},l=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.post(u+"user/admin",{adresseMail:t,password:n},{headers:i}).catch((function(e){if(400===e.response.status)throw new Error("Les identifiants n'existent pas dans la base de donn\xe9es");if(404===e.response.status)throw new Error("Utilisateur inconnu pour cet administrateur");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return r=e.sent,i={Authorization:"Bearer "+r.data.token,"Accept-version":"1.0.0","Access-Control-Allow-Origin":"*"},console.log(i),console.log(r.data),e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get(u+"garage/",{headers:i}).catch((function(e){if(404===e.response.status)throw new Error("Garage inconnu");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return t=e.sent,console.log(JSON.stringify(t.data)),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete(u+"garage/",{headers:i,data:{id:t}}).catch((function(e){if(404===e.response.status)throw new Error("Garage inconnu")}));case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r,o),e.next=3,s.a.post(u+"garage/",{nom:t,adresse:n,numTel:r,image:o},{headers:i}).catch((function(e){if(500===e.response.status)throw new Error("Erreur sdur le serveur");if(400===e.response.status)throw new Error("Erreur sur les \xe9l\xe9ments de la requ\xeate")}));case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.patch(u+"garage/",{headers:i,data:{id:t,nom:n,adresse:r,numTel:o}}).catch((function(e){if(500===e.response.status)throw new Error("Ressource manquante")}));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get(u+"/mecano",{headers:i}).catch((function(e){if(404===e.response.status)throw new Error("Pas de m\xe9canicien dans la base de dinn\xe9es");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.delete(u+"garage/",{headers:i,data:{id:t}}).catch((function(e){if(404===e.response.status)throw new Error("Mecano inconnu")}));case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.patch(u+"garage/",{headers:i,data:{id:t,nom:n,prenom:r,password:o}}).catch((function(e){if(500===e.response.status)throw new Error("Ressource manquante")}));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o,c){var l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r,o,c),e.next=3,s.a.post(u+"garage/",{nom:t,prenom:n,password:r,adresseMail:o,garage_fk:c},{headers:i}).catch((function(e){if(500===e.response.status)throw new Error("Erreur sdur le serveur");if(400===e.response.status)throw new Error("Erreur sur les \xe9l\xe9ments de la requ\xeate")}));case 3:return l=e.sent,e.abrupt("return",l.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()}},[[71,1,2]]]);
//# sourceMappingURL=main.88cc3248.chunk.js.map