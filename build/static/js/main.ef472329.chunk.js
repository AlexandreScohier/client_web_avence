(this["webpackJsonpreact-component"]=this["webpackJsonpreact-component"]||[]).push([[0],{34:function(e,t,n){e.exports=n.p+"static/media/logo.3949abdf.jpg"},37:function(e,t,n){e.exports=n(76)},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t),n.d(t,"login",(function(){return p})),n.d(t,"getAllGarage",(function(){return l})),n.d(t,"deleteGarage",(function(){return d})),n.d(t,"postGarage",(function(){return f})),n.d(t,"updateGarage",(function(){return h})),n.d(t,"getAllMecanicien",(function(){return m})),n.d(t,"deleteMecanicien",(function(){return w})),n.d(t,"updateMecanicien",(function(){return v})),n.d(t,"postMecanicien",(function(){return g})),n.d(t,"getAllDispo",(function(){return b})),n.d(t,"deleteDispo",(function(){return E})),n.d(t,"updateDispo",(function(){return x})),n.d(t,"postDispo",(function(){return k}));var r=n(1),a=n.n(r),o=n(2),s=n(7),c=n.n(s),u="http://localhost:3001/",i={"Access-Control-Allow-Origin":"*"},p=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post(u+"user/admin",{adresseMail:t,password:n},{headers:i}).catch((function(e){if(400===e.response.status)throw new Error("Les identifiants n'existent pas dans la base de donn\xe9es");if(404===e.response.status)throw new Error("Utilisateur inconnu pour cet administrateur");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return r=e.sent,i={Authorization:"Bearer "+r.data.token,"Accept-version":"1.0.0","Access-Control-Allow-Origin":"*"},e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get(u+"garage/",{headers:i}).catch((function(e){if(404===e.response.status)throw new Error("Garage inconnu");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return t=e.sent,console.log(JSON.stringify(t.data)),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.delete(u+"garage/",{headers:i,data:{id:t}}).catch((function(e){if(404===e.response.status)throw new Error("Garage inconnu")}));case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r,o),e.next=3,c.a.post(u+"garage/",{nom:t,adresse:n,numTel:r,image:o},{headers:i}).catch((function(e){if(500===e.response.status)throw new Error("Erreur sdur le serveur");if(400===e.response.status)throw new Error("Erreur sur les \xe9l\xe9ments de la requ\xeate")}));case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,c.a.patch(u+"garage/",{headers:i,data:{id:t,nom:n,adresse:r,numTel:o}}).catch((function(e){if(500===e.response.status)throw new Error("Ressource manquante")}));case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get(u+"mecano/",{headers:i}).catch((function(e){if(404===e.response.status)throw new Error("Pas de m\xe9canicien dans la base de dinn\xe9es");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.delete(u+"mecano/",{headers:i,data:{id:t}}).catch((function(e){if(404===e.response.status)throw new Error("Mecano inconnu")}));case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.patch(u+"mecano/",{headers:i,data:{id:t,nom:n,prenom:r,password:o}}).catch((function(e){if(500===e.response.status)throw new Error("Ressource manquante")}));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o,s){var p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n,r,o,s),e.next=3,c.a.post(u+"mecano/",{nom:t,prenom:n,password:r,adresseMail:o,garage_fk:s},{headers:i}).catch((function(e){if(500===e.response.status)throw new Error("Erreur sdur le serveur");if(400===e.response.status)throw new Error("Erreur sur les \xe9l\xe9ments de la requ\xeate")}));case 3:return p=e.sent,e.abrupt("return",p.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),b=function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get(u+"dispo/",{headers:i}).catch((function(e){if(404===e.response.status)throw new Error("Pas de m\xe9canicien dans la base de dinn\xe9es");if(500===e.response.status)throw new Error("Erreur de connexion")}));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.delete(u+"dispo/",{headers:i,data:{id:t,mecanicien_fk:n}}).catch((function(e){if(404===e.response.status)throw new Error("Mecano inconnu")}));case 2:return r=e.sent,e.abrupt("return",r.status);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o,s){var p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.patch(u+"dispo/",{headers:i,data:{id:t,date:n,isBooked:r,idMecano:o,idReparation:s}}).catch((function(e){if(500===e.response.status)throw new Error("Ressource manquante")}));case 2:return p=e.sent,e.abrupt("return",p.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r,o){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.post(u+"dispo/",{date:t,isBooked:n,idMecanicien:r,idReparation:o},{headers:i}).catch((function(e){if(500===e.response.status)throw new Error("Erreur sdur le serveur");if(400===e.response.status)throw new Error("Erreur sur les \xe9l\xe9ments de la requ\xeate")}));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},74:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),s=n.n(o),c=(n(42),n(12)),u=n(13),i=n(16),p=n(15),l=n(4),d=n(22),f=(n(43),n(34)),h=n.n(f),m=function(e){Object(i.a)(n,e);var t=Object(p.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"SidBar"},a.a.createElement("img",{src:h.a,alt:"logo"}),a.a.createElement("ul",null,a.a.createElement("li",{onClick:function(){return window.location.pathname="/Garage"},id:"/Garage"===window.location.pathname?"active":""},"Garage"),a.a.createElement("li",{onClick:function(){return window.location.pathname="/Mecano"},id:"/Mecano"===window.location.pathname?"active":""},"Mecano"),a.a.createElement("li",{onClick:function(){return window.location.pathname="/Dispos"},id:"/Dispos"===window.location.pathname?"active":""},"Dispos"),a.a.createElement("li",{onClick:function(){return window.location.pathname="/Logout"},id:"/Logout"===window.location.pathname?"active":""},"Logout")))}}]),n}(a.a.Component),w=n(1),v=n.n(w),g=n(2),b=(n(45),n(46)),E=function(){var e=Object(g.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t||void 0===n){e.next=6;break}return e.next=3,b.login(t,n);case 3:return e.abrupt("return",e.sent);case 6:throw new Error("Identfiants manquants");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=n(14),k=function(e){Object(i.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={email:"",password:"",loaded:!1,loading:!1,errorMassage:!1,connected:!1},r}return Object(u.a)(n,[{key:"handleSubmit",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(this.state.email,this.state.password);case 3:if("mecano"===(t=e.sent).user.userRecup.userType){e.next=6;break}throw new Error("Un client ne peut pas se connecter \xe0 l'application!");case 6:this.props.login(t.user.userRecup),console.log(this.props.user.userType),this.setState({connected:!0}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.setState({error:!0,loading:!1,loaded:!0,errorMessage:e.t0});case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"userChange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this;return this.state.connected?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",{className:"form"},a.a.createElement("h1",null,"Se connecter"),a.a.createElement("form",{className:"row g-3"},a.a.createElement("input",{className:"form-control",type:"text",id:"emailAdresse",placeholder:"Adresse mail",value:this.state.email,onChange:function(t){return e.userChange(t)},autoFocus:!0,required:!0}),a.a.createElement("input",{className:"form-control",type:"text",id:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.passwordChange(t)},required:!0}),a.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){e.handleSubmit()}},"Connexion")))}}]),n}(a.a.Component),y=Object(x.b)(void 0,(function(e){return{login:function(t){e({type:"login",payload:{userInfo:t}})}}}))(k),O=function(e){Object(i.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={isConnected:void 0},r}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){void 0===this.state.user&&this.setState({user:this.props.userStore})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement(d.a,null,a.a.createElement(l.d,null,a.a.createElement(l.b,{exact:!0,path:"/login",component:function(){return e.state.isConnected?a.a.createElement(l.a,{to:"/"}):a.a.createElement(y,null)}}),a.a.createElement(l.b,{path:"/",component:function(){return e.state.isConnected?a.a.createElement(m,null):a.a.createElement(l.a,{to:"/login"})}}),a.a.createElement(l.b,{path:"/Logout",onEnter:function(){return e.props.login(void 0)}}))))}}]),n}(a.a.Component),j=Object(x.b)((function(e){return{userStore:e.login.userStore}}))(O);n(74);var C=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=n(24),S=Object(M.b)(Object(M.a)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login":return{userStore:t.payload.userInfo};default:return e}}}));n(75);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x.a,{store:S},a.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.ef472329.chunk.js.map